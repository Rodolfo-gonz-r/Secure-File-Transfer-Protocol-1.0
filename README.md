# Secure-File-Transfer-Protocol-1.0
The goal of this project is to use the cryptographic building blocks that we learned during the lectures of our Applied Cryptography class in practice. 

SiFT v1.0 has the following sub-protocols: Message Transfer Protocol (MTP), Login Protocol, Commands Protocol, Upload Protocol, and Download Protocol. The following figure shows how these sub-protocols are related to each other: 

```
  +--------------+  +-----------------+  +---------------+  +-----------------+
  |Login Protocol|  |Commands Protocol|  |Upload Protocol|  |Download Protocol|
  +--------------+  +-----------------+  +---------------+  +-----------------+
  +---------------------------------------------------------------------------+
  |                     Message Transfer Protocol (MTP)                       |
  +---------------------------------------------------------------------------+
```

SiFT messages are carried by the Message Transfer Protocol (MTP), which provides cryptographic protection to them. Messages are encrypted, their integrity is protected, and sequence numbers are used to detect replay attacks. MTP uses symmetric key cryptographic primitives, which require secret keys shared between the client and the server. These keys are established by the Login Protocol.

The Login Protocol is used to authenticate the parties to each other and to establish the secret key between the client and the server to be used by MTP. The server is authenticated implicitly by requiring it to use its private key, whereas the client authenticates itself to the server by sending a username and a password to it. The secret key intended for MTP is derived from random numbers that the client and the server exchange in the Login Protocol.  As this secret key is established by the Login Protocol, the messages of the Login Protocol itself cannot be protected by it. Hence, MTP uses a temporary key when executing the Login Protocol, which is replaced by the key established by the Login Protocol when it is completed. The temporary key is generated by the client and it is sent to the server in a login request message, which is encrypted with the server's public key.

After the Login Protocol, the Commands Protocol is used to send file commands of the client to the server and responses to those commands. Moreover, the upload command is followed by the execution of the Upload Protocol, which is responsible for the actual upload of the selected file to the server, and the download command is followed by the execution of the Download Protocol, which is responsible for the actual download of the selected file from the server.

## Running the application:

To test our application on ONE device, you must run the server and login the following way:


1. Run server.py, and enter the passphrase `ait-budapest` to load its private key.
2. Open a second terminal
3. Run client.py, and login with the username `alice` and password `aaa`
4. Once logged in, type `help` or `?` to list commands you can run on the server's filesystem.
